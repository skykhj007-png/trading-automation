# 보조계정 Code.gs 전체 교체 가이드

## 🎯 목적
로컬에 있는 최신 `Code-보조계정.gs` 파일을 Apps Script에 완전히 교체합니다.

---

## ✅ 방법 1: 복사 & 붙여넣기 (권장)

### 1단계: 로컬 파일 열기
```
파일: C:\Users\skykh\trading-automation\Code-보조계정.gs
```

VSCode, 메모장, 또는 아무 텍스트 에디터로 열기

### 2단계: 전체 복사
```
Ctrl + A  (전체 선택)
Ctrl + C  (복사)
```

### 3단계: Apps Script에서 교체
1. https://script.google.com 접속
2. 보조계정 프로젝트 선택
3. `Code.gs` 파일 클릭
4. **Ctrl + A** (기존 코드 전체 선택)
5. **Ctrl + V** (새 코드 붙여넣기)
6. **Ctrl + S** (저장)

### 4단계: 확인
- 파일 맨 끝으로 스크롤 (Ctrl + End)
- `function 보조계정_자동매매_진단()` 함수가 있는지 확인

---

## ✅ 방법 2: Git 사용 (이미 git 있는 경우)

```bash
cd C:\Users\skykh\trading-automation
git add Code-보조계정.gs
git commit -m "보조계정 진단 함수 추가"
```

---

## ✅ 방법 3: Clasp 사용 (나중에 자동화)

현재는 인증이 안 되어 있어서, 수동 복사가 더 빠릅니다.

---

## 🔍 교체 후 확인 사항

### 1. 함수 목록 확인
Apps Script 에디터에서 함수 드롭다운을 열면:
```
- 원클릭_전체설정
- doPost
- initSimulation
- 보조계정_자동매매_진단  ← 새로 추가됨!
- syncBitgetPositions
- checkClosedPositions
- ...
```

### 2. 진단 함수 실행
```
함수 선택: 보조계정_자동매매_진단
실행 버튼 클릭
로그 확인
```

---

## 📊 파일 정보

**로컬 파일**:
- 경로: `C:\Users\skykh\trading-automation\Code-보조계정.gs`
- 크기: 141KB
- 줄 수: 4,354줄
- 진단 함수: 4081줄에 위치

**포함된 주요 함수**:
- `원클릭_전체설정()`: 초기 설정 자동화
- `보조계정_자동매매_진단()`: 문제 진단 (새로 추가)
- `syncBitgetPositions()`: Bitget 포지션 동기화
- `checkClosedPositions()`: 청산 확인
- `doPost()`: 웹훅 수신

---

## ⚠️ 주의사항

### 교체 전 백업
만약 Apps Script의 Code.gs에 수정한 내용이 있다면:
1. Apps Script에서 **Ctrl + A** → **Ctrl + C**로 복사
2. 메모장에 임시 저장
3. 그 다음 새 코드 붙여넣기

### 설정값 확인
새 코드 붙여넣은 후 다음 설정값 확인:
```javascript
var SHEET_CONFIG = {
  SPREADSHEET_ID: '여기 보조계정 ID 맞는지 확인!'
  ...
};

var BITGET_CONFIG = {
  API_KEY: '보조계정 API 키 맞는지 확인!',
  SECRET_KEY: '...',
  PASSPHRASE: '...'
};
```

---

## 🚀 교체 후 바로 실행

### 1. 진단 실행
```javascript
보조계정_자동매매_진단()
```

### 2. 문제 발견 시 해결
로그에서 제시하는 해결 방법 따라 실행

### 3. 트리거 확인/재설정
```javascript
원클릭_전체설정()
```

---

## 요약

```
1. Code-보조계정.gs 파일 열기
   ↓
2. Ctrl + A, Ctrl + C (전체 복사)
   ↓
3. Apps Script의 Code.gs 열기
   ↓
4. Ctrl + A, Ctrl + V (전체 교체)
   ↓
5. Ctrl + S (저장)
   ↓
6. 보조계정_자동매매_진단() 실행
```

교체 완료!
