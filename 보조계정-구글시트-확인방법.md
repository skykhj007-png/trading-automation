# 보조계정 구글시트 확인 방법

## 📊 보조계정 스프레드시트

**URL**:
```
https://docs.google.com/spreadsheets/d/1L6wn9fSLa-sThsYLViSOmbh6Em7jbnXXvfvCcvFMH80/edit
```

---

## 📝 시트 구조

### 1. 신호기록 시트

**역할**: TradingView에서 받은 모든 신호 기록

**확인할 내용**:
```
날짜 | 시간 | 마켓 | 신호 | 레버리지 | 진입가 | TP1 | TP2 | SL | ... | 상태
```

**색상**:
- 🟢 녹색: LONG 신호
- 🔴 빨간색: SHORT 신호
- ⚪ 회색: 중복 신호 (무시됨)

**상태 값**:
- `대기중`: 신호 받음, 포지션 아직 생성 안 됨
- `진입완료`: Bitget 포지션 생성됨
- `중복`: 이미 포지션 있어서 무시됨

---

### 2. V25 자동매매일지 시트

**역할**: 실제 거래 기록 (진입 & 청산)

**진입 기록**:
```
날짜/시간 | 마켓 | 방향 | 진입가 | TP1 | TP2 | SL | 상태
```

**청산 기록** (TP/SL 도달 시):
```
날짜/시간 | 청산유형 | 청산가 | 손익% | 손익$ | 잔고
```

**상태 값**:
- `홀딩`: 포지션 보유 중
- `1차익절`: TP1 도달, 50% 익절
- `2차익절`: TP2 도달, 100% 익절
- `손절`: SL 도달

---

### 3. 통계 시트

**역할**: 전체 성과 통계

**표시 내용**:
```
시작 자본: $100
현재 잔고: $13.22
총 수익률: -86.78%
총 거래: X회
승: X회
패: X회
승률: XX%
```

---

## 🔍 신호가 제대로 작성되는지 확인

### 1단계: 신호기록 시트 열기

```
보조계정 스프레드시트 → "신호기록" 시트
```

### 2단계: 마지막 행 확인

**확인할 것**:
- 날짜/시간이 최근인가?
- 마켓이 맞는가? (BTC-USDT, ETH-USDT 등)
- 신호가 맞는가? (LONG/SHORT)
- 진입가/TP/SL 값이 있는가?

### 3단계: 상태 확인

**"대기중"이면**:
- 신호는 받았지만 아직 포지션 생성 전
- 1분 후 트리거 실행되면 Bitget 포지션 생성
- 상태가 "진입완료"로 변경됨

**"중복"이면**:
- 이미 해당 마켓에 포지션이 있어서 무시됨
- 정상 동작

---

## 🧪 신호 테스트 후 확인 순서

### 1. TradingView 신호 발생

**확인**: TradingView 알림 받음

### 2. Apps Script 로그 확인

```
Apps Script → 실행 → 실행 로그
```

**찾을 메시지**:
```
정보    Webhook 수신: 2025-12-21 18:45:23
정보    신호: LONG BTC-USDT
정보    진입: $97,500
정보    신호기록 시트에 저장됨  ← 이 메시지!
```

### 3. 신호기록 시트 즉시 확인

```
스프레드시트 → 신호기록 시트 → 맨 아래 행
```

**새 행이 추가되어야 함**:
```
2025-12-21 | 18:45:23 | BTC-USDT | LONG | 10x | $97,500 | ... | 대기중
```

### 4. 1분 후 자동매매일지 확인

```
syncBitgetPositions 트리거 실행 (1분마다)
     ↓
Bitget API 호출
     ↓
포지션 생성
     ↓
V25 자동매매일지에 기록
```

**새 행이 추가되어야 함**:
```
2025-12-21 18:46 | BTC-USDT | LONG | $97,500 | ... | 홀딩
```

---

## 📊 신호기록 vs 자동매매일지 차이

### 신호기록 시트
- **목적**: TradingView에서 받은 모든 신호 기록
- **저장 시점**: 웹훅 수신 즉시 (1초 이내)
- **중복 신호도 기록**: Yes (상태에 "중복" 표시)

### V25 자동매매일지
- **목적**: 실제 거래 내역 (진입 & 청산)
- **저장 시점**: Bitget 포지션 생성 후 (1분 후)
- **중복 신호는 기록 안 됨**: No (실제 거래만)

---

## ⚠️ 자주 하는 실수

### 실수 1: 신호기록 시트 못 찾음

**확인**:
```
시트 하단 탭:
- 신호기록
- V25 자동매매일지
- 통계
```

탭이 없으면:
```javascript
initSimulation()  // 시트 생성
```

### 실수 2: 신호는 있는데 자동매매일지에 없음

**원인**:
- Bitget 포지션이 생성 안 됨
- 트리거가 안 돌아감

**해결**:
```javascript
보조계정_자동매매_진단()  // 트리거 확인
```

### 실수 3: 새 신호가 안 들어옴

**확인**:
1. TradingView 알림 웹훅 URL 맞는지 확인
2. Apps Script 로그에서 "Webhook 수신" 있는지 확인

---

## 🎯 정상 작동 예시

### 신호 발생 (18:45:23)

**신호기록 시트** (즉시):
```
날짜       시간      마켓       신호  레버리지  진입가     TP1        TP2        SL         상태
2025-12-21 18:45:23 BTC-USDT  LONG  10x      $97,500   $98,280   $98,962   $97,207   대기중
```

**V25 자동매매일지** (1분 후):
```
날짜/시간          마켓       방향  진입가     TP1        TP2        SL         상태
2025-12-21 18:46  BTC-USDT  LONG  $97,500   $98,280   $98,962   $97,207   홀딩
```

### TP1 도달 (19:30:00)

**V25 자동매매일지에 청산 기록 추가**:
```
2025-12-21 19:30  BTC-USDT  1차익절  $98,280   +0.80%   +$0.08   $100.08
```

**신호기록 시트 상태 업데이트**:
```
상태: 대기중 → 1차익절
```

---

## 💡 팁

### 실시간으로 보려면
```
1. 스프레드시트를 브라우저에서 열어둠
2. TradingView 신호 발생
3. 즉시 F5 (새로고침)
4. 맨 아래 행 확인
```

### 여러 마켓 동시 추적
```
신호기록 시트에서:
- BTC-USDT 신호
- ETH-USDT 신호
- SOL-USDT 신호
모두 별도로 기록됨
```

각 마켓별로 독립적인 포지션 관리!
