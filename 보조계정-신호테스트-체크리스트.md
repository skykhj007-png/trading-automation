# 보조계정 자동매매 신호 테스트 체크리스트

## ✅ 설정 완료 확인

- [x] Apps Script 새 배포 완료
- [x] 웹훅 URL `/exec` 버전 확인
- [x] 브라우저 테스트 완료 ({"status":"ok"})
- [ ] TradingView 알림에 새 URL 설정
- [ ] 신호 발생 대기

---

## 🧪 신호 테스트 방법

### 방법 1: 1분봉 테스트 (빠름)

```
1. TradingView → BTC/USDT 차트
2. 1분봉으로 변경
3. 지표 설정:
   - 최소 신호 강도: 8-10 (낮게)
   - 엄격 모드: OFF
4. 1-5분 대기
```

### 방법 2: 기존 타임프레임 유지 (안전)

```
1. 15분봉 또는 1시간봉 유지
2. 신호 발생 대기 (시간 더 걸림)
3. 실제 운영 환경과 동일
```

---

## 📊 신호 발생 시 확인 순서

### 1. TradingView 알림 확인
```
✅ 알림 수신됨 (앱/이메일)
✅ 웹훅 전송 성공 (알림 로그에서 확인)
```

### 2. Apps Script 실행 로그 확인
```
Apps Script → 실행 → 실행 로그
```

**확인할 내용**:
```
✅ "Webhook 수신" 메시지
✅ 신호 정보 (LONG/SHORT, 진입가, TP, SL)
✅ "신호기록 시트에 저장" 메시지
```

**예시**:
```
정보    Webhook 수신: 2025-12-21 18:45:23
정보    신호: LONG BTC-USDT
정보    진입: $97,500
정보    TP1: $98,280 | TP2: $98,962
정보    SL: $97,207
정보    신호기록 시트에 저장됨
```

### 3. 스프레드시트 확인
```
보조계정 스프레드시트 열기:
https://docs.google.com/spreadsheets/d/1L6wn9fSLa-sThsYLViSOmbh6Em7jbnXXvfvCcvFMH80
```

**신호기록 시트**:
```
✅ 마지막 행에 새 신호 추가됨
✅ 타임스탬프, 마켓, 신호, 진입가 등 기록
```

### 4. Bitget 포지션 확인 (1분 후)
```
1분 후 트리거 실행됨 (syncBitgetPositions)
```

**Bitget 선물 계정**:
```
✅ 새 포지션 생성됨
✅ 방향: LONG 또는 SHORT
✅ 진입가 확인
```

### 5. 자동매매일지 확인
```
V25 자동매매일지 시트
```

**확인할 내용**:
```
✅ 새 행 추가
✅ 진입 시간, 마켓, 방향
✅ 진입가, TP1, TP2, SL
✅ 상태: "홀딩"
```

---

## ⚠️ 문제 발생 시 체크

### 케이스 1: TradingView 알림은 오는데 스프레드시트에 기록 안 됨

**확인**:
```
Apps Script → 실행 로그
"Webhook 수신" 메시지 있는지 확인
```

**없으면**:
- TradingView 알림 웹훅 URL 재확인
- /exec 버전인지 확인

**있으면**:
- 스프레드시트 ID 확인
- SHEET_CONFIG.SPREADSHEET_ID 맞는지 확인

### 케이스 2: 스프레드시트에 기록되는데 Bitget 포지션 안 생김

**확인**:
```
Apps Script → 트리거
syncBitgetPositions 트리거 있는지 확인
```

**없으면**:
```javascript
원클릭_전체설정()  // 실행
```

**있으면**:
- Bitget API 키 재확인
- 선물 계정 활성화 확인
- 잔고 충분한지 확인

### 케이스 3: 신호가 아예 안 옴

**확인**:
```
1. 지표가 차트에 적용되어 있는지 확인
2. 알림이 "열린 상태"인지 확인 (만료 안 됨)
3. 1분봉으로 변경해서 테스트
```

---

## 🎯 정상 작동 흐름

```
신호 발생 (TradingView)
     ↓
알림 전송 (웹훅)
     ↓
Apps Script 수신
"Webhook 수신" 로그
     ↓
신호기록 시트에 저장
     ↓
1분 후
     ↓
syncBitgetPositions 트리거 실행
     ↓
Bitget API 호출
포지션 생성
     ↓
V25 자동매매일지에 기록
"진입 완료"
```

---

## 📋 전체 체크리스트

### 설정 완료
- [x] Apps Script 배포
- [x] 웹훅 URL 테스트
- [ ] TradingView 알림 설정

### 신호 테스트
- [ ] TradingView 신호 발생
- [ ] Apps Script "Webhook 수신" 로그
- [ ] 신호기록 시트에 기록
- [ ] Bitget 포지션 생성
- [ ] 자동매매일지에 기록

### 청산 테스트 (나중에)
- [ ] TP1 도달 → 50% 익절
- [ ] TP2 도달 → 100% 익절
- [ ] SL 도달 → 손절
- [ ] 자동매매일지에 청산 기록

---

## 💡 팁

### 빠른 신호 받기
```
1. 1분봉 사용
2. 변동성 큰 코인 (BTC, ETH)
3. 최소 신호 강도 낮추기 (8-10)
```

### 실전 운영 설정
```
1. 15분봉 또는 1시간봉
2. 최소 신호 강도 높이기 (14-16)
3. 엄격 모드 ON
```

---

## 🆘 도움이 필요하면

### 진단 함수 다시 실행
```javascript
보조계정_자동매매_진단()
```

### 실행 로그 확인
```
Apps Script → 실행 → 실행 로그
최근 30분 내역 확인
```

### 트리거 실행 확인
```
Apps Script → 트리거
각 트리거 우측 ... → 실행 로그
```
