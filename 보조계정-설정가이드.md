# 클로드25 트레이딩 시스템 - 보조계정 설정 가이드

## 개요
이 가이드는 소액 보조계정용 자동매매 시스템을 처음부터 설정하는 방법입니다.

---

## 1단계: Google 스프레드시트 생성

### 1-1. 새 스프레드시트 만들기
1. https://sheets.google.com 접속
2. **+ 빈 스프레드시트** 클릭
3. 제목 변경: `클로드25 자동매매 (보조계정)`

### 1-2. 스프레드시트 ID 복사
- URL에서 ID 복사:
```
https://docs.google.com/spreadsheets/d/여기가_스프레드시트_ID/edit
```
- 예시: `1ABC123def456GHI789jkl`

---

## 2단계: Google Apps Script 생성

### 2-1. 앱스크립트 열기
1. 스프레드시트에서 **확장 프로그램** → **Apps Script** 클릭
2. 새 프로젝트가 열림

### 2-2. 프로젝트 이름 변경
- 좌측 상단 "제목 없는 프로젝트" 클릭
- `클로드25 자동매매 (보조계정)` 으로 변경

### 2-3. Code.gs 복사
1. 기존 `Code.gs` 내용 전체 삭제
2. 메인 계정의 `Code.gs` 전체 복사하여 붙여넣기
3. **저장** (Ctrl+S)

---

## 3단계: 설정값 수정 (★ 중요 ★)

### 3-1. 스프레드시트 ID 변경
Code.gs 상단에서 찾기:
```javascript
var SHEET_CONFIG = {
  SPREADSHEET_ID: '여기에_새_스프레드시트_ID_입력',
  ...
};
```

### 3-2. Bitget API 키 변경 (보조계정용)
```javascript
var BITGET_CONFIG = {
  API_KEY: '보조계정_API_KEY',
  SECRET_KEY: '보조계정_SECRET_KEY',
  PASSPHRASE: '보조계정_PASSPHRASE',
  BASE_URL: 'https://api.bitget.com'
};
```

### 3-3. 시작 잔고 설정 (선택)
```javascript
var VIRTUAL_TRADING = {
  STARTING_BALANCE: 100,  // 보조계정 시작 잔고
  ...
};
```

### 3-4. 텔레그램 설정 (선택 - 같은 봇 사용 가능)
```javascript
var TELEGRAM_CONFIG = {
  BOT_TOKEN: '기존_봇_토큰_그대로',
  CHAT_ID: '기존_Chat_ID_그대로'
};
```

---

## 4단계: Bitget 보조계정 API 키 발급

### 4-1. Bitget 로그인
1. https://www.bitget.com 접속
2. **보조계정**으로 로그인

### 4-2. API 키 생성
1. 우측 상단 프로필 → **API 관리**
2. **API 생성** 클릭
3. 설정:
   - 이름: `클로드25 자동매매`
   - 권한: ✅ 읽기, ✅ 거래 (출금은 체크 해제!)
   - IP 제한: 없음 (또는 Google 서버 IP)
4. **확인** 클릭
5. API Key, Secret Key, Passphrase 복사

### 4-3. 선물 계정 활성화
1. Bitget에서 **선물** 메뉴 클릭
2. 선물 계정이 없으면 활성화
3. USDT 입금 또는 자산 이전

---

## 5단계: 앱스크립트 배포

### 5-1. 새 배포 생성
1. Apps Script에서 **배포** → **새 배포**
2. 설정:
   - 유형: **웹 앱**
   - 설명: `V27 보조계정`
   - 실행 권한: **나**
   - 액세스: **모든 사용자**
3. **배포** 클릭
4. **웹 앱 URL 복사** (웹훅용)

### 5-2. URL 형식
```
https://script.google.com/macros/s/AKfycb.../exec
```

---

## 6단계: 트리거 설정

### 6-1. 트리거 페이지 열기
1. Apps Script 좌측 메뉴 **시계 아이콘** (트리거) 클릭
2. 우측 하단 **+ 트리거 추가**

### 6-2. 트리거 1: syncBitgetPositions
- 함수: `syncBitgetPositions`
- 배포: Head
- 이벤트: 시간 기반
- 유형: 분 타이머
- 간격: **1분마다**

### 6-3. 트리거 2: checkClosedPositions
- 함수: `checkClosedPositions`
- 배포: Head
- 이벤트: 시간 기반
- 유형: 분 타이머
- 간격: **1분마다**

---

## 7단계: TradingView 알림 설정

### 7-1. 새 알림 생성
1. TradingView 차트에서 우클릭 → **알림 추가**
2. 조건:
   - 지표: `클로드25 유니버셜`
   - 조건: **모든 alert() 함수 호출**

### 7-2. 웹훅 설정
1. ✅ **웹훅 URL** 체크
2. URL: **5단계에서 복사한 보조계정 웹 앱 URL**
3. 알림 이름: `클로드25 보조계정`

### 7-3. 저장
- **생성** 클릭

---

## 8단계: 시트 초기화

### 8-1. initSimulation 실행
1. Apps Script에서 함수 선택: `initSimulation`
2. **실행** 클릭
3. 권한 승인 (처음 1회)

### 8-2. 생성되는 시트
- V25 자동매매일지
- 통계

---

## 9단계: 테스트

### 9-1. API 연결 테스트
1. Apps Script에서 `testBitgetConnection` 실행
2. 로그 확인: "Bitget 연결 성공"

### 9-2. 잔고 확인
1. `getBitgetBalance` 실행
2. 로그에서 USDT 잔고 확인

### 9-3. 웹훅 테스트
1. 브라우저에서 웹 앱 URL 접속
2. "클로드25 V27 웹훅 서버 작동 중" 메시지 확인

---

## 10단계: 설정 완료 체크리스트

- [ ] 새 스프레드시트 생성
- [ ] 스프레드시트 ID 복사
- [ ] Apps Script에 Code.gs 붙여넣기
- [ ] SHEET_CONFIG.SPREADSHEET_ID 수정
- [ ] BITGET_CONFIG에 보조계정 API 키 입력
- [ ] 앱스크립트 새 배포
- [ ] 트리거 2개 설정 (syncBitgetPositions, checkClosedPositions)
- [ ] TradingView 알림 생성 (보조계정 웹훅 URL)
- [ ] initSimulation 실행
- [ ] testBitgetConnection 테스트

---

## 메인 vs 보조 계정 구분

| 항목 | 메인 계정 | 보조 계정 |
|------|-----------|-----------|
| 스프레드시트 | 별도 | 별도 |
| Apps Script | 별도 | 별도 |
| 웹훅 URL | 별도 | 별도 |
| Bitget API | 메인 API | 보조 API |
| TradingView 알림 | 알림 1 | 알림 2 |
| 텔레그램 봇 | 공유 가능 | 공유 가능 |

---

## 주의사항

### API 키 보안
- API 키는 절대 공개하지 마세요
- 출금 권한은 체크하지 마세요
- IP 제한 설정 권장

### TradingView 알림
- 메인/보조 계정 알림을 별도로 생성
- 같은 신호가 두 계정에 동시에 갈 수 있음

### 자금 관리
- 보조계정은 소액으로 시작
- 레버리지 조심

---

## 문제 해결

### "권한이 없습니다" 오류
- 앱스크립트 배포 시 "모든 사용자" 선택했는지 확인

### Bitget API 오류
- API 키/시크릿/패스프레이즈 정확한지 확인
- 선물 거래 권한 있는지 확인

### 웹훅 작동 안 함
- TradingView 알림에서 웹훅 URL 정확한지 확인
- 앱스크립트 새 배포 필요할 수 있음

### 시트에 기록 안 됨
- SPREADSHEET_ID가 정확한지 확인
- 트리거가 활성화되어 있는지 확인

---

## 빠른 시작 요약

```
1. 새 스프레드시트 생성 → ID 복사
2. Apps Script 생성 → Code.gs 붙여넣기
3. SPREADSHEET_ID, BITGET_CONFIG 수정
4. 배포 → 웹 앱 URL 복사
5. 트리거 2개 설정
6. TradingView 알림 생성 (보조계정 URL)
7. initSimulation 실행
8. 테스트 완료!
```

---

## 연락처

문제 발생 시:
- Apps Script 실행 로그 확인
- 트리거 실행 기록 확인
- Bitget API 상태 확인
