# Trading Automation 프로젝트 요약

## 최종 결정: 수동 매매 + 시그널 참고

자동매매 승률이 17~35%로 실패하여, **V35 Signal Pro를 시그널 참고용으로 사용**하기로 결정

---

## 버전 히스토리

| 버전 | 타입 | 목적 | 결과 |
|------|------|------|------|
| V31-Light | strategy | 로딩 속도 최적화 | request.security 28→10개 |
| V32-Scalping | strategy | 1분봉 스캘핑 | 20% 승률, 5,812회 - 실패 |
| V33-WinRate | strategy | 승률 개선 | 35% 승률, 192회, 손익비 0.21 |
| V34-ProfitRatio | strategy | 손익비 개선 | 13% 승률 - 더 나빠짐 |
| V35-Signal | indicator | 시그널 확인용 | 기본 MTF 시그널 |
| V35-Strategy | strategy | 백테스트용 | LONG 31%, SHORT 15% |
| V36-HighWinRate | strategy | 고승률 전략 | 18% 승률 - 실패 |
| **V37-Precision** | **indicator** | **정밀 시그널** | **추천 - 통합 분석** |

---

## 핵심 파일 목록

### 사용 권장
| 파일명 | 용도 |
|--------|------|
| `매매지표-V37-Precision.pine` | **정밀 시그널 (최신/추천)** |
| `매매지표-V35-Signal.pine` | 기본 시그널 |
| `매매지표-V35-Strategy.pine` | 백테스트용 |
| `수동매매-가이드.md` | 진입 체크리스트 |

### 참고용 (아카이브)
| 파일명 | 용도 |
|--------|------|
| `매매지표-V31-Light.pine` | 로딩 최적화 버전 |
| `매매지표-V32-Scalping.pine` | 스캘핑 (비추천) |
| `매매지표-V33-WinRate.pine` | 승률 개선 시도 |
| `매매지표-V34-ProfitRatio.pine` | 손익비 개선 시도 |
| `매매지표-V36-HighWinRate.pine` | 고승률 전략 시도 |
| `개발기록-V31-V35.md` | 개발 히스토리 |

---

## V37 Precision Signal 사용법 (최신)

### 핵심 기능
1. **멀티TF 거래량 분석**: 5분/15분/1시간/4시간 거래량 동시 확인
2. **자동 지지/저항 감지**: 피봇 기반 S/R 라인 자동 표시
3. **변곡점 감지**: 피봇 하이/로우 + RSI/MACD 다이버전스
4. **통합 점수 시스템**: 최대 30점 (추세+모멘텀+거래량+구조)

### 차트 표시
| 요소 | 설명 |
|------|------|
| 초록 실선 | 지지선 (터치 횟수 표시) |
| 빨강 실선 | 저항선 (터치 횟수 표시) |
| 점선 | HTF S/R (1시간/4시간) |
| 작은 삼각형 | 피봇 하이/로우 |
| DIV+ / DIV- | 다이버전스 감지 |
| 큰 라임 ▲ | STRONG LONG (A+ 등급) |
| 보통 초록 ▲ | LONG (B+ 등급) |

### 신뢰도 등급
| 등급 | 점수 | 의미 |
|------|------|------|
| A+ | 22점+ | 매우 강력 |
| A | 19점+ | 강력 |
| B+ | 16점+ | 좋음 |
| B | 15점+ | 진입 가능 |
| C | 15점 미만 | 대기 |

### LONG 진입 조건 (권장)
```
□ 점수: 16점 이상 (B+ 등급)
□ HTF 1H/4H: UP
□ 지지선: 터치 또는 근처
□ MTF 거래량: 2개 TF 이상 급증
□ RSI: 30~45
□ 다이버전스: 상승DIV (보너스)
```

---

## V35 Signal Pro 사용법

### TradingView 설정
1. `매매지표-V35-Signal.pine` 코드 복사
2. TradingView → Pine Editor → 붙여넣기 → 저장
3. 차트에 추가

### 시그널 해석
| 기호 | 색상 | 의미 | 신뢰도 |
|------|------|------|--------|
| 큰 ▲ | 라임 | MTF LONG | **높음** |
| 보통 ▲ | 초록 | LONG | 중간 |
| 큰 ▼ | 핑크 | MTF SHORT | 중간 (비추천) |
| 보통 ▼ | 빨강 | SHORT | 낮음 (비추천) |

### 진입 체크리스트 (7/9 이상 충족 시 진입)
```
□ 추세: UP
□ HTF: LONG 또는 상승
□ ADX: 20 이상
□ RSI: 30~50
□ StochK: 20~40
□ MACD: BULL
□ 거래량: 1.5x 이상
□ 매수압력: 55% 이상
□ BB: 하단 또는 중앙↑
```

---

## 백테스트 결과 요약

| 버전 | 거래수 | 승률 | 손익비 | 비고 |
|------|--------|------|--------|------|
| V32 | 5,812 | 20% | ? | 과다 거래 |
| V33 | 192 | 35% | 0.21 | TP < SL |
| V34 | 124 | 13% | 0.16 | 실패 |
| V35 | 56 | 23% (L:31%) | 0.98 | MTF 적용 |
| V36 | 286 | 18% | ? | Triple RSI |

**결론**: 자동매매 승률 50% 달성 실패 → 수동매매 선택

---

## 핵심 발견사항

1. **1분봉 스캘핑**: 노이즈 많음, 자동매매 부적합
2. **SHORT**: 모든 버전에서 낮은 승률, LONG만 권장
3. **MTF 시그널**: 현재TF + HTF 일치 시 승률 상승
4. **손익비 vs 승률**: 타이트 SL → 승률 하락, 균형 어려움
5. **수동 판단**: 시그널 + 본인 확인 = 높은 승률 기대

---

## 권장 설정

### 타임프레임
| TF | 용도 | 권장 |
|----|------|------|
| 1분 | 스캘핑 | △ (노이즈) |
| 5분 | 스캘핑 | ○ |
| **15분** | **데이트레이딩** | **◎ 추천** |
| **1시간** | **스윙** | **◎ 추천** |
| 4시간 | 스윙 | ○ |

### TP/SL 가이드
| TF | TP | SL | R:R |
|----|----|----|-----|
| 1분 | 0.3~0.5% | 0.2~0.3% | 1.5:1 |
| 15분 | 0.5~1.0% | 0.3~0.5% | 2:1 |
| 1시간 | 1.0~2.0% | 0.5~1.0% | 2:1 |

---

## 텔레그램 연동 정보

- 무료 채널: https://t.me/V30_Trading
- 토론 그룹 ID: -1003318469200
- 시그널 웹훅: https://eoybgq22a09g1el.m.pipedream.net

---

## 다음 단계 (TODO)

- [ ] V35 Signal Pro 실전 테스트 (1주일)
- [ ] 15분봉/1시간봉에서 수동매매 테스트
- [ ] 승률 기록 및 분석
- [ ] 필요시 시그널 조건 조정

---

## 해결된 오류들

1. **ta.dmi()[2] 인덱싱 오류**
   - 원인: request.security 내에서 직접 인덱싱 불가
   - 해결: 별도 변수로 분리

2. **'tradeMode' already defined (199 errors)**
   - 원인: 파일 손상/중복 코드
   - 해결: 전체 파일 재작성

3. **Trailing stop syntax error**
   - 원인: 트레일링 스탑 문법 오류
   - 해결: 트레일링 스탑 코드 제거

---

*마지막 업데이트: 2024-12-31 (V37 추가)*
*다음 세션에서 이 파일을 참고하여 계속 진행*
