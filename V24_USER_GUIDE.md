# 📊 클로드24 멀티TF + 스마트머니 감지 사용 설명서

## 🎯 v24란?

**클로드24**는 멀티 타임프레임 분석과 스마트머니(큰손) 감지를 결합한 종합 트레이딩 지표입니다.

### 핵심 기능:
- 🐋 **스마트머니 감지**: 큰손/기관 투자자 움직임 포착
- 📈 **멀티 타임프레임**: 15분/5분/3분/1분봉 동시 분석
- 📊 **StochRSI**: 과매수/과매도 구간 판별
- 🎯 **Bollinger Bands**: 변동성 기반 스캘핑 신호
- 💰 **자동 TP/SL**: 진입 시 목표가 자동 계산

---

## 📋 목차

1. [기본 설정](#1-기본-설정)
2. [차트 읽는 법](#2-차트-읽는-법)
3. [신호 종류](#3-신호-종류)
4. [모드 선택](#4-모드-선택)
5. [실전 활용](#5-실전-활용)
6. [문제 해결](#6-문제-해결)

---

## 1. 기본 설정

### 1-1. 인디케이터 추가

```
1. TradingView 차트 열기
2. 인디케이터 검색 → "클로드24" 추가
3. 차트에 표시 확인
```

### 1-2. 필수 설정 (⚙ 톱니바퀴)

```
┌─────────────────────────────────┐
│ 기본 설정:                      │
├─────────────────────────────────┤
│ 레버리지: 5배                   │
│ 투입 비율: 20%                  │
│ TP1 수익률: 0.8%                │
│ TP2 수익률: 1.5%                │
│ 손절 비율: 0.3%                 │
└─────────────────────────────────┘

┌─────────────────────────────────┐
│ 모드 설정:                      │
├─────────────────────────────────┤
│ ☑ 멀티타임프레임 필터 사용      │
│ ☐ 엄격 모드 ← 체크 해제 권장!  │
└─────────────────────────────────┘

┌─────────────────────────────────┐
│ 필터 설정:                      │
├─────────────────────────────────┤
│ ☑ Stochastic RSI 필터 사용      │
│ ☑ BB 스캘핑 필터 사용           │
│ ☑ 스마트머니 감지 사용 ← 필수!  │
└─────────────────────────────────┘
```

### 1-3. 권장 타임프레임

| 거래 스타일 | 권장 차트 | 특징 |
|------------|----------|------|
| 스캘핑 | 1분 | 많은 신호, 빠른 진입/청산 |
| 단타 | 3분, 5분 | 균형잡힌 신호 빈도 |
| 스윙 | 15분 | 적은 신호, 높은 승률 |

---

## 2. 차트 읽는 법

### 2-1. 왼쪽 상단 테이블

```
┌─────────────────────────┐
│ 🎯 신호 강도: 8/10      │ ← 0~10점, 8점 이상 강력
│ 💡 액션: 🚀 즉시 LONG! │ ← 진입 권장도
├─────────────────────────┤
│ 🐋 거래량 비율: 2.5x   │ ← 평균 대비 거래량
│ 📊 매수 압력: 72%      │ ← 매수세 강도
│ 📍 시장 상태: 📈 누적중 │ ← 스마트머니 동향
├─────────────────────────┤
│ StochRSI K: 25.3 🟢GC  │ ← 골든크로스 발생
│ 스캘핑 RSI: 28         │ ← 과매도 구간
│ BB Position: 하단 이탈  │ ← 반등 가능성
├─────────────────────────┤
│ 15m Trend: 🟢 BULL     │ ← 15분봉 상승
│ 5m Trend: 🟢 BULL      │ ← 5분봉 상승
└─────────────────────────┘
```

### 2-2. 차트 위 표시

#### 🐋 큰손/기관 라벨

| 표시 | 의미 | 해석 |
|------|------|------|
| 🐋 (녹색, 아래) | 큰손 매수 | 거래량 평균의 2배 이상 + 양봉 |
| 🐋 (빨강, 위) | 큰손 매도 | 거래량 평균의 2배 이상 + 음봉 |
| 🐳 (파랑, 아래) | 기관 매수 | 거래량 평균의 3배 이상 + 양봉 |
| 🐳 (보라, 위) | 기관 매도 | 거래량 평균의 3배 이상 + 음봉 |

**💡 Tip**: 🐳 기관 진입 = 강력한 신호!

#### 배경색

| 색상 | 의미 | 행동 |
|------|------|------|
| 연한 녹색 | 📈 누적 구간 | 가격↑ + 거래량↑ → LONG 기회 |
| 연한 빨강 | 📉 분산 구간 | 가격↓ + 거래량↑ → SHORT 기회 |
| 노란색 | 🟡 BB 스퀴즈 | 변동성 축소 → 곧 급등/급락 |

#### 라인

| 색상 | 종류 | 의미 |
|------|------|------|
| 파란선 | EMA 20 (15m) | 단기 추세선 |
| 빨간선 | EMA 50 (15m) | 중기 추세선 |
| 녹색 점선 | TP1 | 1차 익절가 (50% 매도) |
| 녹색 실선 | TP2 | 2차 익절가 (50% 매도) |
| 빨간 실선 | SL | 손절가 |

---

## 3. 신호 종류

### 3-1. LONG 신호 (매수)

```
📅 2024-11-22 15:30
🔥 v24 큰손감지 LONG / $95,000
TP1: $95,760 / TP2: $96,425
SL: $94,715
15m:✅ 5m:✅
StochK:25.3 🟢GC
🎯BB반전 RSI:28
🆕 🐋매수세 매수:72%
```

#### 라벨 읽는 법:

| 항목 | 의미 |
|------|------|
| 15m:✅ 5m:✅ | 15분/5분봉 모두 상승 추세 |
| StochK:25.3 🟢GC | StochRSI 골든크로스 |
| 🎯BB반전 | BB 하단에서 반등 |
| RSI:28 | 과매도 구간 (30 이하) |
| 🐋매수세 | 큰손이 매수 중 |
| 매수:72% | 매수 압력 72% |

### 3-2. SHORT 신호 (매도)

```
📅 2024-11-22 15:30
🔥 v24 큰손감지 SHORT / $96,000
TP1: $95,232 / TP2: $94,560
SL: $96,288
15m:❌ 5m:❌
StochK:85.7 🔴DC
💥BB돌파 RSI:72
🆕 🐋매도세 매도:75%
```

### 3-3. 신호 강도 (0~10점)

```
점수 계산:
- 기본 신호: 3점
- 🐳 기관 진입: +3점
- 🐋 큰손 진입: +2점
- 📈 누적 구간: +2점
- 매수압력 70% 이상: +1점
```

| 점수 | 등급 | 액션 | 승률 예상 |
|------|------|------|-----------|
| 0-3 | 약함 | ⏸️ 대기 | 50% |
| 4-6 | 보통 | ⚠️ 신중 진입 | 60-70% |
| 7-8 | 강함 | ✅ 진입 권장 | 75-85% |
| 9-10 | 매우 강함 | 🚀 즉시 진입! | 85-95% |

---

## 4. 모드 선택

### 4-1. 엄격 모드 vs 완화 모드

#### 엄격 모드 (Strict Mode)

```
조건: 모든 필터 동시 만족
- 15분봉 상승 ✅
- 5분봉 상승 ✅
- StochRSI 조건 ✅
- BB 조건 ✅
- 스마트머니 조건 ✅

특징:
✅ 신호 횟수: 적음 (1일 0~2회)
✅ 승률: 매우 높음 (85-95%)
✅ 거짓 신호: 거의 없음
❌ 기회 손실: 많음
```

**추천 대상**: 보수적 트레이더, 고승률 선호

#### 완화 모드 (체크 해제)

```
조건: 15분 OR 5분 중 하나만 만족
- 15분봉 상승 OR 5분봉 상승 ✅
- StochRSI 조건 ✅
- BB 조건 ✅
- 스마트머니 조건 ✅

특징:
✅ 신호 횟수: 많음 (1일 5~10회)
✅ 승률: 높음 (70-80%)
✅ 기회 포착: 많음
❌ 거짓 신호: 가끔 있음
```

**추천 대상**: 스캘퍼, 많은 거래 선호

### 4-2. 필터 조합 추천

#### 초보자 (안정적)

```
☑ 멀티타임프레임 필터 사용
☐ 엄격 모드
☑ Stochastic RSI 필터 사용
☑ BB 스캘핑 필터 사용
☑ 스마트머니 감지 사용

→ 신호: 중간 빈도, 승률: 75%+
```

#### 스캘퍼 (공격적)

```
☑ 멀티타임프레임 필터 사용
☐ 엄격 모드
☐ Stochastic RSI 필터 사용
☑ BB 스캘핑 필터 사용
☑ 스마트머니 감지 사용

→ 신호: 많음, 승률: 65-70%
```

#### 전문가 (선택적)

```
☑ 멀티타임프레임 필터 사용
☑ 엄격 모드
☑ Stochastic RSI 필터 사용
☑ BB 스캘핑 필터 사용
☑ 스마트머니 감지 사용

→ 신호: 적음, 승률: 85%+
```

---

## 5. 실전 활용

### 5-1. LONG 진입 체크리스트

```
✅ 신호 강도 7점 이상
✅ 🐋 큰손 또는 🐳 기관 매수
✅ 📈 누적 구간 (연한 녹색 배경)
✅ StochRSI < 30 또는 골든크로스
✅ 매수 압력 > 65%
✅ 15분/5분봉 상승 추세
✅ BB 하단 반등 또는 돌파
```

### 5-2. 진입/청산 전략

#### A. 보수적 (50%씩 분할 익절)

```
진입: 신호 강도 8점 이상만
청산:
- TP1 (0.8%) 도달 → 50% 매도
- TP2 (1.5%) 도달 → 나머지 50% 매도
- SL (-0.3%) 도달 → 전량 손절
```

#### B. 공격적 (전량 TP2)

```
진입: 신호 강도 7점 이상
청산:
- TP1 무시
- TP2 (1.5%) 도달 → 전량 매도
- SL (-0.3%) 도달 → 전량 손절

장점: 큰 수익
단점: TP1 후 하락 시 손실
```

#### C. 트레일링 스톱

```
진입: 신호 강도 7점 이상
청산:
- TP1 도달 → SL을 진입가로 이동
- TP2 도달 → SL을 TP1으로 이동
- 계속 상승 → 수동 청산

장점: 큰 추세 포착
단점: 수동 관리 필요
```

### 5-3. 피해야 할 상황

```
❌ 신호 강도 5점 이하
❌ 🐋 큰손 없이 거래량 저조
❌ 📉 분산 구간에서 LONG
❌ 📈 누적 구간에서 SHORT
❌ StochRSI 과매수 구간에서 LONG
❌ StochRSI 과매도 구간에서 SHORT
❌ BB 스퀴즈 중 (방향 불명확)
❌ 15분/5분봉 추세 반대
```

### 5-4. 리스크 관리

```
1회 거래당 최대 손실: 계좌의 1~2%

예시:
- 계좌: $1,000
- 레버리지: 5배
- 투입: $200 (20%)
- 손절: 0.3%
- 최대 손실: $200 × 0.3% × 5배 = $3 (0.3%)

✅ 안전!
```

---

## 6. 문제 해결

### ❌ 신호가 전혀 안 나와요

**원인**: 엄격 모드 + 모든 필터 활성화

**해결**:
```
1. 엄격 모드 체크 해제
2. 필터 1~2개 비활성화
3. 타임프레임을 1분으로 변경
```

### ❌ 신호가 너무 많이 나와요

**원인**: 완화 모드 + 필터 부족

**해결**:
```
1. 엄격 모드 체크
2. 모든 필터 활성화
3. 타임프레임을 15분으로 변경
4. 신호 강도 8점 이상만 진입
```

### ❌ 중복 신호가 계속 나와요

**원인**: TradingView에서 동일 신호 반복 발생

**해결**:
```
🆕 v2 WebhookHandler가 자동 처리합니다!

- 30분 이내 동일 신호는 자동 무시
- 알림만 보내고 시트 기록 안 함
- "⚠️ 중복 신호" 알림으로 확인 가능

설정 변경:
Apps Script → WebhookHandler → DUPLICATE_WINDOW
(기본 30분, 조정 가능)
```

### ❌ 반대 신호가 나왔는데 어떻게 하죠?

**상황**: LONG 진입 후 SHORT 신호 발생

**해결**:
```
🆕 v2 WebhookHandler가 자동 감지합니다!

알림: "🔄 반대 신호 - 기존 LONG 청산 필요"
시트: 노란색 배경으로 기록

권장 행동:
1. 기존 LONG 포지션 수동 청산
2. 새로운 SHORT 신호 확인
3. 신호 강도가 높으면 SHORT 진입

설정 변경:
Apps Script → WebhookHandler → ALLOW_REVERSE
(true: 반대신호 허용, false: 무시)
```

### ❌ 큰손 라벨이 안 보여요

**원인**: 스마트머니 감지 비활성화

**해결**:
```
인디케이터 설정:
☑ 🆕 스마트머니 감지 사용 (체크)
```

### ❌ TP/SL 라인이 안 보여요

**원인**: 신호 발생 후 라인 생성

**해결**:
```
LONG/SHORT 신호가 발생해야 라인이 나타납니다.
신호가 없으면 라인도 없습니다.
```

### ❌ 알람이 안 와요

**원인**: TradingView 알람 미설정

**해결**:
```
1. 차트에서 ⏰ 알람 아이콘 클릭
2. 조건: "클로드24..." → "alert() function calls only"
3. 빈도: Once Per Bar Close
4. 만료: Open-ended
5. 생성
```

---

## 📊 성과 예상 (백테스트 기준)

### 완화 모드 (권장)

```
신호 빈도: 1일 5~10회
승률: 70-80%
평균 손익비: 1:3~1:5
월 예상 수익률: +15~30%

시작 잔고: $100
1개월 후: $115~130
3개월 후: $150~220
```

### 엄격 모드

```
신호 빈도: 1일 0~2회
승률: 85-95%
평균 손익비: 1:5~1:7
월 예상 수익률: +10~20%

시작 잔고: $100
1개월 후: $110~120
3개월 후: $130~175
```

---

## 🎓 학습 팁

### 1주차: 관찰

```
- 실제 매매 금지
- 신호 발생 시 차트 캡처
- 신호 강도와 결과 기록
- 어떤 신호가 성공했는지 분석
```

### 2주차: 소액 테스트

```
- $10~50 소액 매매
- 신호 강도 8점 이상만
- TP1/TP2/SL 엄수
- 매매일지 작성
```

### 3주차: 본격 매매

```
- 계좌의 20% 투입
- 리스크 관리 철저
- 감정적 매매 금지
- 통계 분석 시작
```

---

## 💡 Pro Tips

### Tip 1: 🐳 기관 진입 따라가기

```
🐳 파란색 다이아몬드 = 최고의 진입 기회
→ 신호 강도 자동 +3점
→ 즉시 진입 권장
```

### Tip 2: 누적/분산 구간 활용

```
📈 연한 녹색 배경 + LONG 신호 = 황금 조합
📉 연한 빨강 배경 + SHORT 신호 = 황금 조합
```

### Tip 3: BB 스퀴즈 후 대기

```
🟡 노란 배경 = 변동성 축소
→ 곧 큰 움직임 예상
→ 돌파 방향 확인 후 진입
```

### Tip 4: 신호 강도 우선

```
신호 강도 9점 LONG vs 7점 SHORT
→ 9점 LONG 선택!

강한 신호 > 약한 신호
```

### Tip 5: 손절 지키기

```
손절가 도달 = 무조건 청산
"조금만 기다리면..." = 금지!

작은 손실 10번 < 큰 손실 1번
```

---

## 📞 지원

문제 발생 시:
1. 인디케이터 설정 스크린샷
2. 차트 상태 캡처
3. 어떤 문제인지 설명

---

## 🔄 업데이트 내역

### 🆕 WebhookHandler v2 (2024-11-22)
- ✅ 중복 신호 자동 필터링 (30분 이내)
- ✅ 반대 신호 자동 감지 및 경고
- ✅ 구글 시트 색상 구분 (정상/중복/반대)
- ✅ 상세 알림 (중복/반대 신호 알림)

### v24 (2024-11-21) - 현재 버전
- ✅ 🐋 큰손/기관 감지 추가
- ✅ Volume Delta 분석
- ✅ 누적/분산 구간 표시
- ✅ 신호 강도 계산 (0-10점)
- ✅ 액션 추천 표시

### v23
- Bollinger Bands 스캘핑

### v22
- Stochastic RSI 추가

### v21
- 멀티 타임프레임 분석

---

## 📊 구글 시트 "신호기록" 색상 가이드

| 배경색 | 의미 | 설명 |
|--------|------|------|
| 연한 녹색 | LONG 신호 | 정상 매수 신호 |
| 연한 빨강 | SHORT 신호 | 정상 매도 신호 |
| 노란색 | 🔄 반대 신호 | 기존 포지션과 반대 신호 발생 |

### 구글 시트 예시:

```
┌────────────────────────────────────────────────────────────┐
│ 날짜       시간     신호   진입가    비고                   │
├────────────────────────────────────────────────────────────┤
│ 11-22     10:00    LONG   95,000    수동 매매 대기         │
│ (녹색 배경)                                                │
├────────────────────────────────────────────────────────────┤
│ 11-22     10:15    SHORT  95,500    🔄 반대 신호!          │
│ (노란 배경)                         기존 LONG 청산 필요!   │
├────────────────────────────────────────────────────────────┤
│ 11-22     10:45    LONG   94,800    수동 매매 대기         │
│ (녹색 배경)                                                │
└────────────────────────────────────────────────────────────┘
```

---

## ⚙️ WebhookHandler v2 설정

### 기본 설정값:

```javascript
const SIGNAL_CONFIG = {
  DUPLICATE_WINDOW: 30,  // 중복 신호 무시 시간 (분)
  ALLOW_REVERSE: true,   // 반대 신호 허용
  MIN_SIGNAL_INTERVAL: 5 // 최소 신호 간격 (분)
};
```

### 설정 변경 방법:

```
1. Apps Script 에디터 열기
2. WebhookHandler 파일 클릭
3. 상단 SIGNAL_CONFIG 찾기
4. 값 수정
5. Ctrl+S 저장
```

### 추천 설정:

#### 보수적 트레이더:
```javascript
DUPLICATE_WINDOW: 60,   // 1시간 동안 중복 무시
ALLOW_REVERSE: false,   // 반대 신호 무시
```

#### 공격적 트레이더:
```javascript
DUPLICATE_WINDOW: 15,   // 15분 동안만 중복 무시
ALLOW_REVERSE: true,    // 반대 신호 허용
```

---

## 🔔 알림 종류 완전 가이드

### 1️⃣ 정상 신호 알림

```
🚀 LONG 신호 발생!

마켓: KRW-BTC
진입가: 95,000,000

📊 신호 강도: 15.5점
📈 스마트머니: WHALE
📊 거래량비율: 2.5배
📍 시장상태: ACCUMULATION

🎯 목표가:
  TP1: 95,760,000 (+0.80%)
  TP2: 96,425,000 (+1.50%)
  SL: 94,715,000 (-0.30%)

⚠️ 수동 매매 모드: 직접 진입하세요!
```

**행동**: 진입가와 목표가 확인 후 수동 진입

---

### 2️⃣ 중복 신호 알림 (🆕)

```
⚠️ 중복 신호 무시

신호: LONG
진입가: 95,100,000

10분 전에 동일한 신호가 있었습니다.
이전 신호: 95,000,000

중복 무시됨
```

**행동**:
- 무시해도 됨
- 이미 진입했다면 그대로 유지
- 구글 시트에 기록 안 됨

---

### 3️⃣ 반대 신호 알림 (🆕)

```
🔄 반대 신호 발생!

기존: LONG @ 95,000,000
새신호: SHORT @ 95,500,000

⚠️ 기존 LONG 포지션을 수동 청산하고
새로운 SHORT 신호를 확인하세요!

시간차: 15분
```

**행동**:
1. 기존 LONG 포지션 확인
2. 수익 중이면 청산 고려
3. SHORT 신호 강도 확인 후 진입 판단
4. 구글 시트에 노란색으로 기록됨

---

### 4️⃣ 약한 신호 알림

```
⚠️ 신호 강도 부족

신호: LONG
진입가: 95,000,000
점수: 10/12

최소 강도 미달로 무시됨
```

**행동**: 무시 (진입 안 함)

---

## 🧪 테스트 가이드

### WebhookHandler v2 테스트

Apps Script에서 테스트 함수 실행:

#### 1. 중복 신호 테스트
```
함수: testDuplicateSignal
실행 → 로그 확인

결과:
- 1차 신호: 정상 처리
- 2차 신호 (5초 후): 중복으로 무시
```

#### 2. 반대 신호 테스트
```
함수: testReverseSignal
실행 → 로그 확인

결과:
- LONG 신호: 정상 처리
- SHORT 신호 (5초 후): 반대 신호 경고
```

#### 3. 마지막 신호 확인
```
함수: checkLastSignal
실행 → 마지막 신호 정보 표시

표시 내용:
- 신호 종류 (LONG/SHORT)
- 진입가
- 시간 (몇 분 전)
- 반대 신호 여부
```

#### 4. 신호 초기화
```
함수: clearLastSignal
실행 → 마지막 신호 삭제

용도:
- 테스트 후 초기화
- 오래된 신호 삭제
```

---

**중요**: 이 지표는 보조 도구입니다. 최종 매매 판단은 본인이 하세요!

**목표**: $100 → $1,000 (10배) 달성! 🚀
